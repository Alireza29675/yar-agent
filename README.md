# YAR — Understand Complex Codebases Fast

An agentic CLI tool for understanding codebases through deep code exploration, built with [Claude Agent SDK](https://docs.claude.com/en/api/agent-sdk/overview).

[![npm version](https://badge.fury.io/js/yar-agent.svg)](https://www.npmjs.com/package/yar-agent)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Installation

```bash
npm install -g yar-agent

yar --version
```

### Quick Start

```bash
# cd to the complex codebase you want to onboard on, then:
yar study . -o REPORT.md && yar present -o slides.html -f REPORT.md --serve

# this will take a few minutes to complete, but after magic happens, the presentation will be served on your browser and VALA! ✨
```

## Requirements

- Node.js 18+
- [Claude Code CLI](https://claude.com/code) - Must be set up before running YAR
  - Uses your existing Claude subscription with no additional charges

## Commands

### `yar study [directory]`

Analyze directory structure, architecture, and patterns.

```bash
# Study current directory
yar study . -o REPORT.md

# Study specific directory with guided focus
yar study ./packages/core -m "Focus on security" -o core-security-analysis.md

# More with Study command
yar study --help
```

### `yar timeline [directory]`

Trace a directory's Git history to understand how it evolved over time. This helps you spot patterns that have been used in the codebase, figure out what's new, and identify what's legacy way of doing things.

```bash
# Analyze current directory timeline
yar timeline . -o EVOLUTION.md

# Focus on specific aspects
yar timeline ./src/api -m "Focus on architecture changes" -o EVOLUTION.md

# More with Timeline command
yar timeline --help
```

### `yar present -f [guide file] [options]`

Convert content to presentation. You can use the content generated by `yar study` or `yar timeline` as the guide file and make it into a presentation for faster onboarding.

```bash
# From files
yar present -o slides.html -f REPORT.md

# From multiple files
yar present -o slides.html -f REPORT.md -f EVOLUTION.md

# From stdin
cat notes.md | yar present -o slides.html

# Serve the HTML presentation file immediately after generation
yar present -o slides.html -f REPORT.md --serve

# More with Present command
yar present --help
```

## Use YAR in CI to keep documentation up to date

YAR automatically detects if the output file already exists and updates it with new findings. No special flag needed!

```bash
yar study . -o docs/GUIDE.md  # Creates new file or updates existing one
```

In Github Actions, you can use YAR to keep documentation fresh:

```yaml
- name: Setup Claude Code CLI
  run: |
    npm install -g @anthropic-ai/claude-code-cli
    echo "ANTHROPIC_API_KEY=${{ secrets.ANTHROPIC_API_KEY }}" >> $GITHUB_ENV

- name: Update documentation
  run: yar study . -o docs/GUIDE.md

- name: Commit changes
  run: |
    git config user.name "github-actions[bot]"
    git config user.email "github-actions[bot]@users.noreply.github.com"
    git add docs/GUIDE.md
    git commit -m "docs: update codebase analysis" || exit 0
    git push
```

## Contributing

Want to contribute? Check out [CONTRIBUTOR_ONBOARDING.md](./CONTRIBUTOR_ONBOARDING.md) - a comprehensive guide generated by YAR itself that covers architecture, development workflow, and how to add new features.

To update the contributor guide:
```bash
pnpm onboarding:update
```

## Why YAR?

In Farsi (my mother language), YAR (یار) means companion.

## License

MIT © Alireza Sheikholmolouki

## Links

- [GitHub](https://github.com/Alireza29675/yar)
- [Issues](https://github.com/Alireza29675/yar/issues)
